define(["module","text","underscore"],function(module,text,_){var settings=module.config()||{};return{load:function(e,r,n,o){return o.isBuild?void text.load.call(text,e,r,n,o):void r(["text!"+e],function(r){var o=r?_.template(r,void 0,settings):function(){return""};o._moduleName=e,n(o)})},write:function(pluginName,moduleName,write,config){text.write.call(text,pluginName,moduleName,{asModule:function(name,contents){contents=contents.substr(contents.indexOf("return")+7),contents=contents.substr(0,contents.lastIndexOf(";")-3);try{var template=_.template(eval(contents),void 0,settings);write.asModule(pluginName+"!"+moduleName,"define(function() { var func = "+template.source+"; func._moduleName = '"+moduleName+"'; return func; });")}catch(err){throw console.error("~~~~~"),console.error("FAILED TO COMPILE "+pluginName+"!"+moduleName),console.error("Error:		"+String(err)),console.error("\n"),err&&err.source&&(console.error("Error Source:\n"),console.error(err.source),console.error("\n\n")),console.error("Original Contents:\n"),console.error(contents),console.error("\n\n"),err}}},config)}}});
//# sourceMappingURL=tpl.js
//# sourceMappingURL=tpl.js.map