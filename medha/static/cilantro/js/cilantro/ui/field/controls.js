define(["underscore","marionette","loglevel","../../core","../base","../controls"],function(e,i,t,o,n,r){var s=function(e,i){i&&(i.listenTo(e,"change",function(e,t){i.clear(),i.set(t)}),e.listenTo(i,"change",function(i){e.set(i.toJSON())}))},l=function(e,i){i.stopListening(e),e.stopListening(i)},h=n.ErrorView.extend({message:"Error rendering field control"}),w=n.LoadView.extend({message:"Loading and rendering field controls..."}),d=i.ItemView.extend({errorView:h,template:function(){},initialize:function(){var i=this.model.get("control");if(i=r.get(i)||i,e.isFunction(i))this.viewClass=i;else{var o=this;require([i],function(e){o.viewClass=e,o.render()},function(e){o.showErrorView(),t.debug(e)})}},onRender:function(){this.viewClass&&(this.view=new this.viewClass(this.model.toJSON()),this.view.render(),this.$el.html(this.view.el),this.listenTo(this.view,{beforeready:this.onControlBeforeReady,error:this.onControlError}),this.view.ready(!0))},onBeforeClose:function(){if(this.view){var e=this.model.get("filter");l(this.view,e),this.view.close()}},onControlBeforeReady:function(){var e=this.model.get("filter");this.view.set(e.toJSON()),s(this.view,e)},onControlError:function(){this.showErrorView()},showErrorView:function(){this.view=new this.errorView(this.model.toJSON()),this.view.render(),this.$el.html(this.view.el)}}),c=i.CollectionView.extend({itemView:d,emptyView:w});return{FieldControls:c}});
//# sourceMappingURL=controls.js
//# sourceMappingURL=controls.js.map