define(["underscore","backbone","marionette","../../core","./base"],function(e,t,n,i,o){var l=n.ItemView.extend({template:function(){},tagName:"option",modelEvents:{"change:selected":"render"},onRender:function(){var e=this.model.get("label");this.$el.text(""===e?"(empty)":"null"===e?"(null)":e),this.$el.attr("value",this.model.get("value")),this.$el.attr("selected",this.model.get("selected"))}}),c=o.ControlCompositeView.extend({className:"selection-list",template:"controls/select/list",itemView:l,itemViewOptions:function(e){return{model:e}},itemViewContainer:".items",ui:{items:".items"},events:{"change .items":"onSelectionChange"},collectionEvents:{reset:"onCollectionSync"},initialize:function(){if(this.wait(),!this.collection){this.collection=new t.Collection;var e=this;this.model.values({limit:0}).done(function(t){return e.collection.reset(t.values),e.ready()})}this.on("ready",function(){this.change()})},onCollectionSync:function(){this.render()},onSelectionChange:function(){this.change()},getField:function(){return this.model.id},getOperator:function(){return"exact"},getValue:function(){return this.ui.items.val()},setValue:function(e){this.ui.items.val(e)},validate:function(t){return e.isNull(t.value)||e.isUndefined(t.value)?"An option must be selected":void 0}}),s=c.extend({onCollectionSync:function(){this.render()},onSelectionChange:function(){var e=this;this.ui.items.children().each(function(t,n){e.collection.models[t].set("selected",n.selected)}),this.change()},onRender:function(){this.ui.items.attr("multiple",!0)},getOperator:function(){return"in"},getValue:function(){return e.map(this.collection.where({selected:!0}),function(e){return e.get("value")})},setValue:function(e){e||(e=[]),this.collection.each(function(t){t.set("selected",e.indexOf(t.get("value"))>=0)})},validate:function(e){return e.value&&e.value.length?void 0:"At least one option must be selected"}});return{SingleSelectionList:c,MultiSelectionList:s}});
//# sourceMappingURL=select.js
//# sourceMappingURL=select.js.map