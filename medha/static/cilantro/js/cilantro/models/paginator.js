define(["underscore","backbone","../core"],function(e,t,n){var r={comparator:"page_num",refresh:function(){var t=e.result(this,"url");if(this.pending){if(t===this.pending.url)return;this.pending.abort&&this.pending.abort()}var n=this;this.pending=this.fetch({reset:!0}).done(function(){delete n.pending,n.setCurrentPage(n.models[0].id)}),this.pending.url=t},parse:function(e,t){return t.reset||this.reset(null,{silent:!0}),e?(this.perPage=e.per_page,this.trigger("change:pagesize",this,this.perPage),this.numPages=e.num_pages,this.trigger("change:pagecount",this,this.numPages),this.objectCount=e.item_count,this.trigger("change:objectcount",this,this.objectCount),this.currentPageNum=null,this.setCurrentPage(e.page_num),[e]):void 0},hasPage:function(e){return e>=1&&e<=this.numPages},hasNextPage:function(e){return e||(e=this.currentPageNum),e<this.numPages},hasPreviousPage:function(e){return e||(e=this.currentPageNum),e>1},setCurrentPage:function(e){if(e!==this.currentPageNum){if(!this.hasPage(e))throw new Error("Cannot set the current page out of bounds");return this.previousPageNum=this.currentPageNum,this.currentPageNum=e,this.trigger.apply(this,["change:currentpage",this].concat([].slice.call(this.getCurrentPageStats())))}},getPage:function(e,t){if(t||(t={}),this.hasPage(e)){var n=this.get(e);return n||t.load===!1||(n=new this.model({page_num:e}),n.pending=!0,this.add(n),n.fetch().done(function(){delete n.pending})),n&&t.active!==!1&&this.setCurrentPage(e),n}},getCurrentPage:function(e){return this.getPage(this.currentPageNum,e)},getFirstPage:function(e){return this.getPage(1,e)},getLastPage:function(e){return this.getPage(this.numPages,e)},getNextPage:function(e,t){return e||(e=this.currentPageNum),this.getPage(e+1,t)},getPreviousPage:function(e,t){return e||(e=this.currentPageNum),this.getPage(e-1,t)},pageIsLoading:function(e){e||(e=this.currentPageNum);var t=this.getPage(e,{active:!1,load:!1});return t?!!t.pending:void 0},getPageCount:function(){return this.numPages},getCurrentPageStats:function(){return[this.currentPageNum,{previous:this.previousPageNum,first:1===this.currentPageNum,last:this.currentPageNum===this.numPages}]}},i=t.Model.extend({idAttribute:"page_num",url:function(){var t=e.result(this.collection,"url");return n.utils.alterUrlParams(t,{page:this.id,per_page:this.collection.perPage})}}),u=t.Collection.extend({model:i});return e.extend(u.prototype,r),{PaginatorMixin:r,Page:i,Paginator:u}});
//# sourceMappingURL=paginator.js
//# sourceMappingURL=paginator.js.map